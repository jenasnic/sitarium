{#
Allows to display statistics about quiz and players.
Required :
- quizInfos : statisctics about quiz.
- userInfos : statisctics about players.
#}

{% extends "admin.html.twig" %}

{% block body %}

    <h1 class="title">{{ 'back.quiz.statistics'|trans }}</h1>

    {# Display statistics about quiz #}
    <div id="statistics">

        <div class="tabs is-boxed is-centered">
            <ul>
                <li class="tab-item" data-panel="statistics-quiz"><a>{{ 'back.quiz.statistics.quiz'|trans }}</a></li>
                <li class="tab-item" data-panel="statistics-user"><a>{{ 'back.quiz.statistics.player'|trans }}</a></li>
            </ul>
        </div>

        <div id="statistics-quiz" class="tab-panel is-hidden">
            <table class="table is-striped is-hoverable is-fullwidth">
                <thead>
                    <tr>
                        <th>{{ 'back.quiz.statistics.quiz'|trans }}</th>
                        <th>{{ 'back.quiz.statistics.participant_count'|trans }}</th>
                        <th>{{ 'global.detail'|trans }}</th>
                    </tr>
                </thead>
                <tbody>
                {% for quizInfo in quizInfos %}
                    <tr>
                        <td>{{ quizInfo['name'] }}</td>
                        <td>{{ quizInfo['userCount'] }}</td>
                        <td>
                            <a href="{{ path('bo_quiz_statistics_quiz', { 'quiz': quizInfo['id'] }) }}">
                                <span class="icon has-text-info button">
                                    <i class="fas fa-search"></i>
                                </span>
                            </a>
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>

        {# Display statistics about player #}
        <div id="statistics-user" class="tab-panel is-hidden">
            <table class="table is-striped is-hoverable is-fullwidth">
                <thead>
                    <tr>
                        <th>{{ 'back.quiz.statistics.player'|trans }}</th>
                        <th>{{ 'back.quiz.statistics.response_count'|trans }}</th>
                        <th>{{ 'back.quiz.statistics.last_session'|trans }}</th>
                        <th>{{ 'global.detail'|trans }}</th>
                    </tr>
                </thead>
                <tbody>
                {% for userInfo in userInfos %}
                    <tr>
                        <td>{{ userInfo['firstname'] }} {{ userInfo['lastname'] }}</td>
                        <td>{{ userInfo['responseCount'] }}</td>
                        <td>{{ userInfo['lastDate']|date("d/m/Y") }}</td>
                        <td>
                            <a href="{{ path('bo_quiz_statistics_user', { 'user': userInfo['id'] }) }}">
                                <span class="icon has-text-info button">
                                    <i class="fas fa-search"></i>
                                </span>
                            </a>
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>

    </div>

{% endblock %}
